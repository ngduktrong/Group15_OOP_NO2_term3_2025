<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>üé¨ Qu·∫£n l√Ω Phim</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f7f9; margin: 30px; }
    h1 { color: #2c3e50; }
    form, table { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
    input, textarea, select, button {
      width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 6px;
    }
    button { background: #2ecc71; color: white; cursor: pointer; border: none; }
    button:hover { background: #27ae60; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 12px; border: 1px solid #e1e1e1; text-align: left; }
    th { background: #3498db; color: white; }
    tr:hover { background: #f2f2f2; }
    .actions { display: flex; gap: 6px; }
    .message { color: green; font-weight: bold; margin-bottom: 10px; }
    img { width: 60px; }
  </style>
</head>
<body>
  

<h1>üé¨ Qu·∫£n l√Ω phim</h1>
<div class="back-container">
    <a th:href="@{/admin/dashboard}">
        <button class="back-button">
            <i class="fas fa-arrow-left"></i> Quay l·∫°i giao di·ªán ch√≠nh
        </button>
    </a>
</div>

<!-- ‚úÖ Th√¥ng b√°o -->
<div th:if="${message}" class="message" th:text="${message}"></div>

<!-- ‚úÖ Form th√™m / s·ª≠a -->
<form th:action="@{${editMode} ? '/phim/edit/' + ${phim.maPhim} : '/phim/add'}" method="post" th:object="${phim}">
  <input type="hidden" th:field="*{maPhim}"/>
  <label>T√™n phim:</label> <input type="text" th:field="*{tenPhim}" required/>
  <label>Th·ªùi l∆∞·ª£ng (ph√∫t):</label> <input type="number" th:field="*{thoiLuong}" min="1" required/>
  <label>Ng√†y kh·ªüi chi·∫øu:</label> <input type="date" th:field="*{ngayKhoiChieu}" required/>
  <label>Qu·ªëc gia:</label> <input type="text" th:field="*{nuocSanXuat}" required/>
  <label>ƒê·ªãnh d·∫°ng:</label> <input type="text" th:field="*{dinhDang}" required/>
  <label>ƒê·∫°o di·ªÖn:</label> <input type="text" th:field="*{daoDien}" required/>
  <label>M√¥ t·∫£:</label> <textarea th:field="*{moTa}" rows="3"></textarea>
  <label>Poster (file name):</label> <input type="text" th:field="*{duongDanPoster}"/>
  <button type="submit" th:text="${editMode} ? 'C·∫≠p nh·∫≠t phim' : 'Th√™m phim'"></button>
</form>

<!-- ‚úÖ Danh s√°ch phim -->
<table>
  <thead>
    <tr>
      <th>M√£</th><th>T√™n</th><th>Th·ªùi l∆∞·ª£ng</th><th>Ng√†y chi·∫øu</th><th>Q.Gia</th>
      <th>ƒê·ªãnh d·∫°ng</th><th>ƒê·∫°o di·ªÖn</th><th>M√¥ t·∫£</th><th>Poster</th><th>Thao t√°c</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="p : ${phims}">
      <td th:text="${p.maPhim}"/>
      <td th:text="${p.tenPhim}"/>
      <td th:text="${p.thoiLuong}"/>
      <td th:text="${p.ngayKhoiChieu}"/>
      <td th:text="${p.nuocSanXuat}"/>
      <td th:text="${p.dinhDang}"/>
      <td th:text="${p.daoDien}"/>
      <td th:text="${p.moTa}"/>
      <td><img th:src="@{'/images/' + ${p.duongDanPoster}}" alt="Poster"/></td>
      <td class="actions">
        <a th:href="@{'/phim/edit/' + ${p.maPhim}}">‚úèÔ∏è</a>
        <form th:action="@{'/phim/delete/' + ${p.maPhim}}" method="post" style="display:inline;">
          <button type="submit" onclick="return confirm('Xo√° phim n√†y?')">üóëÔ∏è</button>
        </form>
      </td>
    </tr>
  </tbody>
</table>

</body>
</html>
