<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>üé¨ Qu·∫£n l√Ω Phim</title>
    <link rel="stylesheet" th:href="@{/css/phim.css}">
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 30px;
            background-color: #f4f7f9;
        }
        h1 {
            color: #2c3e50;
        }
        form {
            background: #ffffff;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }
        button {
            padding: 10px 16px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        button:hover {
            background-color: #27ae60;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            box-shadow: 0 0 8px rgba(0,0,0,0.05);
        }
        th, td {
            border: 1px solid #e1e1e1;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:hover {
            background-color: #f2f2f2;
        }
        .actions {
            display: flex;
            gap: 10px;
        }
        .message {
            color: green;
            font-weight: bold;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<h1>üé¨ Qu·∫£n l√Ω phim</h1>

<!-- ‚úÖ TH√îNG B√ÅO -->
<div th:if="${message}" class="message" th:text="${message}"></div>

<!-- ‚úÖ FORM TH√äM / S·ª¨A -->
<form th:action="@{${editMode} ? '/phim/edit/' + ${phim.maPhim} : '/phim/add'}" method="post" th:object="${phim}">
    <input type="hidden" th:field="*{maPhim}"/>

    <label>T√™n phim:</label>
    <input type="text" th:field="*{tenPhim}" required/>

    <label>Th·ªùi l∆∞·ª£ng (ph√∫t):</label>
    <input type="number" th:field="*{thoiLuong}" min="1" required/>

    <label>Ng√†y kh·ªüi chi·∫øu:</label>
    <input type="date" th:field="*{ngayKhoiChieu}" required/>

    <label>N∆∞·ªõc s·∫£n xu·∫•t:</label>
    <input type="text" th:field="*{nuocSanXuat}" required/>

    <label>ƒê·ªãnh d·∫°ng:</label>
    <input type="text" th:field="*{dinhDang}" required/>

    <label>ƒê·∫°o di·ªÖn:</label>
    <input type="text" th:field="*{daoDien}" required/>

    <label>M√¥ t·∫£:</label>
    <textarea th:field="*{moTa}" rows="3"></textarea>

    <label>ƒê∆∞·ªùng d·∫´n poster:</label>
    <input type="text" th:field="*{duongDanPoster}"/>

    <button type="submit" th:text="${editMode} ? 'C·∫≠p nh·∫≠t phim' : 'Th√™m phim'"></button>
</form>

<!-- ‚úÖ DANH S√ÅCH PHIM -->
<table>
    <thead>
        <tr>
            <th>M√£</th>
            <th>T√™n phim</th>
            <th>Th·ªùi l∆∞·ª£ng</th>
            <th>Ng√†y kh·ªüi chi·∫øu</th>
            <th>Qu·ªëc gia</th>
            <th>ƒê·ªãnh d·∫°ng</th>
            <th>ƒê·∫°o di·ªÖn</th>
            <th>M√¥ t·∫£</th>
            <th>Poster</th>
            <th>Thao t√°c</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="p : ${phims}">
            <td th:text="${p.maPhim}">1</td>
            <td th:text="${p.tenPhim}">T√™n phim</td>
            <td th:text="${p.thoiLuong}">90</td>
            <td th:text="${p.ngayKhoiChieu}">2025-01-01</td>
            <td th:text="${p.nuocSanXuat}">USA</td>
            <td th:text="${p.dinhDang}">2D</td>
            <td th:text="${p.daoDien}">ƒê·∫°o di·ªÖn</td>
            <td th:text="${p.moTa}">M√¥ t·∫£</td>
            <td><img th:src="@{'/images/' + ${p.duongDanPoster}}" alt="Poster" width="60"/></td>
            <td class="actions">
                <a th:href="@{'/phim/edit/' + ${p.maPhim}}">‚úèÔ∏è</a>
                <form th:action="@{'/phim/delete/' + ${p.maPhim}}" method="post" style="display:inline;">
                    <button type="submit" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√°?')">üóëÔ∏è</button>
                </form>
            </td>
        </tr>
    </tbody>
</table>

</body>
</html>
